#!/bin/bash

# Set common variables
INPUT_BOX_ADDRESS="0xc70074BDD26d8cF983Ca6A5b89b8db52D5850051"
APPLICATION_ADDRESS="0xab7528bb862fb57e8a2bcd567a2e929a0be56a5e"
MNEMONIC="test test test test test test test test test test test junk"
RPC_URL="http://localhost:8545/"

# Function to send input using cast
send_input() {
    local input=$1
    local index=$2
    cast send \
        --mnemonic "$MNEMONIC" \
        --mnemonic-index $index \
        --rpc-url "$RPC_URL" \
        $INPUT_BOX_ADDRESS \
        "addInput(address,bytes)(bytes32)" $APPLICATION_ADDRESS $input
}

echo "Testing Config functions..."

# 1. Create a new Config

echo "1. Creating a Config..."
CREATE_INPUT="7b226d6574686f64223a20226372656174655f636f6e666967222c202261726773223a207b2261646d696e57616c6c6574416464726573736573223a205b22307866333946643665353161616438384636463463653661423838323732373963666646623932323636225d2c202263617274657369546f6b656e436f6e747261637441646472657373223a2022307844303134314538393961363543393561353536664532423237653539383241364445376644443741222c20227661756c74436f6e747261637441646472657373223a2022307830373838324165316563423734323961383466314435333034386433356334624232303536383737222c202261727469737450657263656e74616765223a2037302c2022706f6f6c50657263656e74616765223a2033302c202266656550657263656e74616765223a20322c202273657276657241646472657373223a2022307830303030303030303030303030303030303030303030303030303030303030303030303030303030222c202272656c6179657241646472657373223a2022307866333946643665353161616438384636463463653661423838323732373963666646623932323636222c202264617070436f6e747261637441646472657373223a2022307861623735323862623836326662353765386132626364353637613265393239613062653536613565222c20226d656c6f64696f75734e667441646472657373223a2022307830303030303030303030303030303030303030303030303030303030303030303030303030303030227d7d"
send_input $CREATE_INPUT 0
